version: 1.0.0
type: REST_API
buildSpec:
  env:
    - name: OLLAMA_API_BASE_URL
      value: "${OLLAMA_API_URL}"
      description: "OLLAMA API base URL"
      required: true
    - name: MODEL_NAME
      value: "deepseek-coder"
      description: "OLLAMA model name to use"
      required: true
    - name: ENVIRONMENT
      value: "production"
      description: "Environment name"
      required: true
    - name: REQUEST_TIMEOUT
      value: "300"
      description: "Request timeout in seconds"
      required: false
    - name: RATE_LIMIT_PER_MINUTE
      value: "60"
      description: "Rate limit per minute"
      required: false
  python:
    version: "3.11"
  dependencies:
    python:
      requirements: requirements.txt
deploy:
  restApi:
    port: 8080
    basePath: /
    cors:
      enabled: true
      allowOrigins:
        - "*"
    security:
      enabled: true
      authTypes:
        - OAuth2
    resources:
      - path: /health
        operations:
          - method: GET
            secured: false
      - path: /api/v1/model
        operations:
          - method: GET
      - path: /api/v1/generate
        operations:
          - method: POST 